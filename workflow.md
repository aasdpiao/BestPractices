# 综合工作流文档：6A+5S高效开发流程

## 📋 概述

本文档结合了6A工作流项目规则和5S敏捷开发个人规则，构建了一套完整的AI辅助开发流程体系。通过项目级流程管控和个人执行规范的双重保障，实现从"AI瞎写"到"精准交付"的转变。

### 核心理念
- **6A工作流**：项目级流程管控，确保需求对齐、架构合理、任务原子化
- **5S个人规则**：个人执行规范，保证开发质量和效率
- **协同效应**：两套规则相互补充，实现1+1>10的效果

---

## 🎯 第一部分：6A工作流项目规则

### 激活方式
- **触发条件**：用户输入以"6A"开头的内容即可启动工作流
- **激活响应**：立即响应「6A工作流已激活」

### 🔄 6A工作流程详解

#### 阶段1：Align（对齐阶段）
**目标**：模糊需求 → 精确规范

**执行步骤**：
1. **项目上下文分析**
   - 分析现有项目结构、技术栈、架构模式
   - 理解业务域和数据模型
   - 识别现有代码模式和约定

2. **需求理解确认**
   - 创建 `docs/任务名/ALIGNMENT_[任务名].md`
   - 包含：原始需求、边界确认、需求理解、疑问澄清

3. **智能决策策略**
   - 自动识别歧义和不确定性
   - 生成结构化问题清单（按优先级排序）
   - 基于现有项目内容进行决策

4. **最终共识**
   - 生成 `docs/任务名/CONSENSUS_[任务名].md`
   - 包含：明确需求描述、技术实现方案、验收标准

**质量门控**：
- ✅ 需求边界清晰无歧义
- ✅ 技术方案与现有架构对齐
- ✅ 验收标准具体可测试
- ✅ 所有关键假设已确认

#### 阶段2：Architect（架构阶段）
**目标**：共识文档 → 系统架构 → 模块设计 → 接口规范

**执行步骤**：
1. **系统分层设计**
   - 基于CONSENSUS、ALIGNMENT文档设计架构
   - 生成 `docs/任务名/DESIGN_[任务名].md`
   - 包含：整体架构图(mermaid)、分层设计、模块依赖关系图

2. **设计原则**
   - 严格按照任务范围，避免过度设计
   - 确保与现有系统架构一致
   - 复用现有组件和模式

**质量门控**：
- ✅ 架构图清晰准确
- ✅ 接口定义完整
- ✅ 与现有系统无冲突
- ✅ 设计可行性验证

#### 阶段3：Atomize（原子化阶段）
**目标**：架构设计 → 拆分任务 → 明确接口 → 依赖关系

**执行步骤**：
1. **子任务拆分**
   - 基于DESIGN文档生成 `docs/任务名/TASK_[任务名].md`
   - 每个原子任务包含：输入契约、输出契约、实现约束、依赖关系

2. **拆分原则**
   - 复杂度可控，便于AI高成功率交付
   - 按功能模块分解，确保任务原子性
   - 有明确的验收标准，可独立编译和测试

**质量门控**：
- ✅ 任务覆盖完整需求
- ✅ 依赖关系无循环
- ✅ 每个任务都可独立验证
- ✅ 复杂度评估合理

#### 阶段4：Approve（审批阶段）
**目标**：原子任务 → 人工审查 → 迭代修改 → 按文档执行

**执行检查清单**：
- **完整性**：任务计划覆盖所有需求
- **一致性**：与前期文档保持一致
- **可行性**：技术方案确实可行
- **可控性**：风险在可接受范围
- **可测性**：验收标准明确可执行

#### 阶段5：Automate（自动化执行）
**目标**：按照审批通过的任务计划自动化执行开发

**执行原则**：
- AI按任务顺序执行
- 每写完一个函数必须先写单元测试
- 测试不通过不准提交代码
- 实时更新进度和文档

#### 阶段6：Assess（评估阶段）
**目标**：项目交付后的质量评估和经验总结

**评估内容**：
- 生成 `docs/任务名/FINAL_[任务名].md`
- 包含：代码质量评分、测试覆盖率、遗留TODO
- 要求：测试覆盖率≥80%

---

## 🏃‍♂️ 第二部分：5S敏捷开发个人规则

### 1S：文档管理（核心中的核心）

**创建时机**：
- 新项目第一天必须建立说明文档.md
- 包含：项目规划+实施方案+进度记录

**更新要求**：
- 每次开发前先读文档
- 改一行代码就同步更新文档
- 完成任务后必须写"结果说明"

**文档结构**：
```
项目名/
├── docs/
│   ├── ALIGNMENT_项目名.md    # 需求对齐文档
│   ├── CONSENSUS_项目名.md     # 共识文档
│   ├── DESIGN_项目名.md        # 架构设计文档
│   ├── TASK_项目名.md          # 任务拆分文档
│   └── FINAL_项目名.md         # 最终评估文档
├── src/                        # 源代码
├── tests/                      # 测试代码
└── README.md                   # 项目说明
```

### 2S：开发流程（顺序化思考，拒绝跳步）

**开发顺序**：
1. 先写接口文档（输入参数、返回格式）
2. 再写单元测试（边界条件：空列表、分页越界）
3. 最后实现功能

**关键原则**：
- 完成一个任务打勾一个
- 绝不允许"这个功能差不多了，先做下个"
- 同时只专注一个任务

### 3S：问题解决（官方文档是爹，搜索引擎是儿子）

**解决顺序**：
1. 技术问题先查AI知识库
2. 解决不了必须翻官方文档
3. 严禁"百度一下复制粘贴"

**文档优先级**：
- Python问题 → Python.org官方文档
- Java问题 → Oracle官方文档
- 框架问题 → 对应框架官方文档

### 4S：执行约束（三大"绝不允许"）

1. **绝不允许项目延期**
   - 提前3天识别风险
   - 延期必须同步更新文档并说明原因

2. **绝不允许超出计划**
   - 加功能可以，但必须先改规划文档
   - 评估影响后再执行

3. **绝不允许出错**
   - 编译错误零容忍
   - 测试不通过零容忍
   - 文档不一致零容忍

### 5S：环境与输出（细节决定成败）

**开发环境标准化**：
- 统一操作系统和开发工具
- IDE插件版本锁定
- 代码格式化工具统一配置

**代码输出规范**：
- 所有函数必须加注释
- 注释格式固定：
```python
def login(username: str, password: str) -> dict:
    """
    用户登录接口
    :param username: 用户名（长度6-20位）
    :param password: 密码（包含大小写+数字）
    :return: {code:0,data:{token:str,user:dict}}
    """
```

---

## 🔄 第三部分：6A+5S协同工作流

### 协同原则
- **6A管项目流程**：确保需求对齐、架构合理、任务可控
- **5S管个人执行**：保证开发质量、文档同步、问题解决
- **双重保障**：项目级约束+个人级规范

### 实际执行流程

#### 项目启动阶段
1. **6A-Align**：需求对齐，创建ALIGNMENT文档
2. **5S-1S**：建立项目文档结构
3. **6A-Architect**：架构设计，创建DESIGN文档
4. **5S-3S**：查阅相关技术官方文档

#### 开发执行阶段
1. **6A-Atomize**：任务拆分，创建TASK文档
2. **6A-Approve**：任务审批，确认可执行性
3. **5S-2S**：按顺序执行（文档→测试→代码）
4. **5S-4S**：执行约束检查
5. **6A-Automate**：自动化执行开发任务

#### 项目收尾阶段
1. **5S-5S**：环境与输出标准化检查
2. **6A-Assess**：项目评估，创建FINAL文档
3. **5S-1S**：最终文档更新和归档

### 质量保证机制

**代码质量**：
- SonarQube扫描问题数 ≤ 3个/千行
- 测试覆盖率 ≥ 80%
- 所有函数必须有注释

**文档质量**：
- 每个阶段都有对应文档
- 文档与代码保持同步
- 变更必须更新相关文档

**流程质量**：
- 严格按照6A阶段执行
- 遵循5S个人规范
- 定期进行流程回顾和优化

---

## 📊 效果评估

### 预期效果
- **返工率**：从40% → 5%
- **开发效率**：单人日产出从3个功能点 → 8个
- **代码质量**：SonarQube问题数从20个/千行 → 3个
- **项目延期率**：显著降低
- **团队协作效率**：大幅提升

### 成功案例
以电商优惠券系统开发为例：
- 通过6A确保架构对齐现有营销系统
- 通过5S让每个开发按"文档→测试→代码"顺序执行
- 结果：提前5天上线，零bug

---

## 🚀 实施建议

### 团队推广策略
1. **小项目试点**：先在小项目上验证效果
2. **效果展示**：用数据说话，展示改进效果
3. **逐步推广**：成功后逐步扩展到更多项目
4. **持续优化**：根据实际情况调整规则

### 常见问题解答

**Q：6A工作流会不会太复杂？**
A：初期可能感觉步骤多，但相比后期的返工和维护成本，绝对值得！而且AI会自动执行，你只需要确认关键节点。

**Q：适合什么规模的项目？**
A：从小功能到大项目都适用。小项目可以简化某些阶段，大项目则能充分发挥威力。

**Q：如何说服团队使用？**
A：先在一个小项目上试用，效果立竿见影，自然就能说服大家。

---

## 📝 总结

通过6A工作流项目规则和5S敏捷开发个人规则的结合，我们可以：

✅ 让AI按照专业流程工作
✅ 确保需求理解准确无误
✅ 保证代码质量和可维护性
✅ 建立完善的文档体系
✅ 实现高效的团队协作

**核心理念**：好的AI助手不是天生的，是调教出来的。通过系统化的流程管理和个人规范约束，我们可以真正实现从"被AI带跑"到"驾驭AI"的转变。

**行动建议**：立即开始配置你的第一条规则，在实践中不断优化和完善这套工作流体系。